<div class="row justify-content-center">
    <h1>Articles en vente</h1>
    <div class="text-end">
        <button *ngIf="showAddButton()" class="btn btn-outline-success"  
            [routerLink]="['/products/edit']"
        >
        Ajouter un article</button>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Image</th>
                <th scope="col">Nom</th>
                <th scope="col">Prix</th>
                <th scope="col" class="text-end">Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (product of products; track product.id; let i = $index) {
                <tr>
                    <th scope="row">{{ i + 1 }}</th>
                    <td >
                        <img
                           *ngIf="product.image"
                            [src]="'data:image/jpeg;base64,' + product.image"
                            class="me-2"
                            style="width: 20px"
                        />
                    </td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.price }} â‚¬</td>
                    <td class="text-end">
                        <button class="btn btn-outline-secondary me-2" 
                            [routerLink]="['/products/view', product.id]"
                        >
                            Voir
                        </button>
                        <button 
                            class="btn btn-outline-secondary me-2" 
                            [routerLink]="['/products/edit', product.id]"
                            *ngIf="showEditButton()"
                        >
                            Modifier
                        </button>
                        <button 
                            class="btn btn-outline-danger"
                            *ngIf="showDeleteButton()"
                            (click)="deleteProduct(product.id)"
                        >
                            Supprimer
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>